
name: Check Folders and Files
on:
  pull_request_target:
    types: [opened, reopened]

jobs:
  check-folders-and-files:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Check for required folders and files
      run: |
        development_branch="development"
        
        # Check if the folder name has been changed or deleted in the created branch
        if git diff --name-only --diff-filter=RD $development_branch "${{ github.ref }}" | grep -q 'dbt_project.yml'; then
          echo "Folder name 'dbt_project.yml' has been changed or deleted in the created branch."
          exit 1  # Fail the workflow
        fi
